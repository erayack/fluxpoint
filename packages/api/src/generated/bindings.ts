// This file has been generated by Specta. DO NOT EDIT.

export type ReplayEventResponse = { event: WebhookEventSummary; circuit: TargetCircuitState | null }

export type LeaseResponse = { events: LeasedEvent[] }

export type ApiErrorCode = "validation" | "unauthorized" | "rate_limited" | "not_found" | "conflict" | "database" | "internal"

export type WebhookEvent = { id: string; endpoint_id: string; replayed_from_event_id: string | null; provider: string; headers: { [key: string]: string }; payload: string; status: WebhookEventStatus; attempts: number; received_at: string; next_attempt_at: string | null; lease_expires_at: string | null; leased_by: string | null; last_error: string | null }

export type ReportOutcome = "delivered" | "retry" | "dead"

export type TargetCircuitState = { endpoint_id: string; state: TargetCircuitStatus; open_until: string | null; consecutive_failures: number; last_failure_at: string | null }

export type LeaseRequest = { limit: number; lease_ms: number; worker_id: string }

export type WebhookEventListItem = { event: WebhookEventSummary; target_url: string; circuit: TargetCircuitState | null }

export type ListEventsResponse = { events: WebhookEventListItem[]; next_before: string | null }

export type WebhookAttemptLog = { id: string; event_id: string; attempt_no: number; started_at: string; finished_at: string; request_headers: { [key: string]: string }; request_body: string; response_status: number | null; response_headers: { [key: string]: string } | null; response_body: string | null; error_kind: WebhookAttemptErrorKind | null; error_message: string | null }

export type WebhookAttemptErrorKind = "timeout" | "network" | "invalid_response" | "unexpected"

export type GetEventResponse = { event: WebhookEvent; target_url: string; circuit: TargetCircuitState | null }

export type ReportResponse = { circuit: TargetCircuitState | null; final_outcome: ReportOutcome }

export type TargetCircuitStatus = "closed" | "open"

export type WebhookEventStatus = "pending" | "in_flight" | "requeued" | "delivered" | "dead" | "paused"

export type ApiErrorResponse = { code: ApiErrorCode; message: string }

export type WebhookEventSummary = { id: string; endpoint_id: string; replayed_from_event_id: string | null; provider: string; status: WebhookEventStatus; attempts: number; received_at: string; next_attempt_at: string | null; last_error: string | null }

export type ReportAttempt = { started_at: string; finished_at: string; request_headers: { [key: string]: string }; request_body: string; response_status: number | null; response_headers: { [key: string]: string } | null; response_body: string | null; error_kind: WebhookAttemptErrorKind | null; error_message: string | null }

export type LeasedEvent = { event: WebhookEvent; target_url: string; lease_expires_at: string; circuit: TargetCircuitState | null }

export type ReplayEventRequest = { reset_circuit: boolean | null }

export type ReportRequest = { worker_id: string; event_id: string; outcome: ReportOutcome; retryable: boolean; next_attempt_at: string | null; attempt: ReportAttempt }

export type ListAttemptsResponse = { attempts: WebhookAttemptLog[] }

